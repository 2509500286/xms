#pragma checksum "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "b507f3a4afb5f0276b93f3a7ff50a1b5304b7b43"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Security_EditRoleEntityPermissions), @"mvc.1.0.view", @"/Views/Security/EditRoleEntityPermissions.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "G:\projects\xms_v2\Presentation\Xms.Web\Views\_ViewImports.cshtml"
using Xms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "G:\projects\xms_v2\Presentation\Xms.Web\Views\_ViewImports.cshtml"
using Xms.Core;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "G:\projects\xms_v2\Presentation\Xms.Web\Views\_ViewImports.cshtml"
using Xms.Infrastructure;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "G:\projects\xms_v2\Presentation\Xms.Web\Views\_ViewImports.cshtml"
using Xms.Infrastructure.Utility;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "G:\projects\xms_v2\Presentation\Xms.Web\Views\_ViewImports.cshtml"
using Xms.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "G:\projects\xms_v2\Presentation\Xms.Web\Views\_ViewImports.cshtml"
using Xms.Web.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "G:\projects\xms_v2\Presentation\Xms.Web\Views\_ViewImports.cshtml"
using Xms.Web.Framework;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"b507f3a4afb5f0276b93f3a7ff50a1b5304b7b43", @"/Views/Security/EditRoleEntityPermissions.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"4b0011d9a8909cdacaf42363c4ba3a5683bc0ece", @"/Views/_ViewImports.cshtml")]
    public class Views_Security_EditRoleEntityPermissions : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<Xms.Web.Models.EditRoleEntityPermissionsModel>
    {
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_0 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("id", new global::Microsoft.AspNetCore.Html.HtmlString("editform"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_1 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("class", new global::Microsoft.AspNetCore.Html.HtmlString("form-horizontal"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_2 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("data-jsonajax", new global::Microsoft.AspNetCore.Html.HtmlString("true"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_3 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("data-istip", new global::Microsoft.AspNetCore.Html.HtmlString("true"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_4 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("method", "post", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        #line hidden
        #pragma warning disable 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        #pragma warning restore 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#nullable restore
#line 2 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
  
    if (Model.Entities.Count(x => x.EntityGroups.IsEmpty()) > 0)
    {
        var nullGroup = new Xms.Core.Data.Entity("entitygroup");
        nullGroup.SetIdValue(Guid.Empty);
        nullGroup["name"] = "未分组";
        Model.EntityGroups.Insert(0, nullGroup);
        foreach (var item in Model.Entities.Where(x => x.EntityGroups.IsEmpty()))
        {
            item.EntityGroups = Guid.Empty.ToString();
        }
    }

#line default
#line hidden
#nullable disable
            WriteLiteral(@"<div class=""container-fluid"">
    <div class=""row"" style=""padding:5px 0px;"">
        <div class=""col-sm-11 btn-group"" id=""owners"">
            <button type=""button"" class=""btn btn-sm btn-default"">类型：</button>
        </div>
    </div>
</div>
<div class=""panel panel-default"">
    <div class=""panel-heading"">
        <h3 class=""panel-title"">
            <a data-toggle=""collapse""
               href=""#collapseTwo"">
                <strong id=""rolename"" class=""text-primary"">");
#nullable restore
#line 27 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                      Write(Model.Role.Name);

#line default
#line hidden
#nullable disable
            WriteLiteral("</strong> - <strong>");
#nullable restore
#line 27 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                                                          Write(app.T[Model.ResourceName].IfEmpty(Model.ResourceName));

#line default
#line hidden
#nullable disable
            WriteLiteral("</strong>\r\n            </a>\r\n        </h3>\r\n    </div>\r\n    <div id=\"collapseTwo\" class=\"panel-collapse collapse in\">\r\n        <div class=\"panel-body\">\r\n            ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("form", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "b507f3a4afb5f0276b93f3a7ff50a1b5304b7b437818", async() => {
                WriteLiteral("\r\n                ");
#nullable restore
#line 34 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
           Write(Html.AntiForgeryToken());

#line default
#line hidden
#nullable disable
                WriteLiteral("\r\n                ");
#nullable restore
#line 35 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
           Write(Html.HiddenFor(x => x.RoleId));

#line default
#line hidden
#nullable disable
                WriteLiteral("\r\n                ");
#nullable restore
#line 36 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
           Write(Html.HiddenFor(x => x.ResourceName));

#line default
#line hidden
#nullable disable
                WriteLiteral("\r\n                <ul id=\"myTab\" class=\"nav nav-tabs\">\r\n");
#nullable restore
#line 38 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                     foreach (var group in Model.EntityGroups)
                    {
                        if (Model.Entities.Count(x => x.EntityGroups.IsNotEmpty() && x.EntityGroups.IndexOf(group.Id.ToString(), StringComparison.InvariantCultureIgnoreCase) >= 0) == 0)
                        {
                            continue;
                        }

#line default
#line hidden
#nullable disable
                WriteLiteral("                        <li>\r\n                            <a");
                BeginWriteAttribute("href", " href=\"", 2031, "\"", 2057, 2);
                WriteAttributeValue("", 2038, "#tab_", 2038, 5, true);
#nullable restore
#line 45 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
WriteAttributeValue("", 2043, group["name"], 2043, 14, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(" data-toggle=\"tab\">\r\n                                ");
#nullable restore
#line 46 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                           Write(group["name"]);

#line default
#line hidden
#nullable disable
                WriteLiteral("\r\n                            </a>\r\n                        </li>\r\n");
#nullable restore
#line 49 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                    }

#line default
#line hidden
#nullable disable
                WriteLiteral("                </ul>\r\n                <div id=\"myTabContent\" class=\"tab-content\">\r\n");
#nullable restore
#line 52 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                     foreach (var group in Model.EntityGroups)
                    {
                        var groupEntities = Model.Entities.Where(x => x.EntityGroups.IsNotEmpty() && x.EntityGroups.IndexOf(group.Id.ToString(), StringComparison.InvariantCultureIgnoreCase) >= 0)?.ToList();
                        if (groupEntities.IsEmpty())
                        {
                            continue;
                        }

#line default
#line hidden
#nullable disable
                WriteLiteral("                        <div");
                BeginWriteAttribute("id", " id=\"", 2769, "\"", 2792, 2);
                WriteAttributeValue("", 2774, "tab_", 2774, 4, true);
#nullable restore
#line 59 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
WriteAttributeValue("", 2778, group["name"], 2778, 14, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(@" class=""tab-pane fade"" style=""padding:5px;"">
                            <div class=""form-group col-sm-12"">
                                <div class=""table-responsive"" style=""overflow:initial;"">
                                    <table class=""table table-bordered table-condensed table-hover table-striped"" id=""entities"">
                                        <thead>
                                            <tr>
                                                <th class=""xms-checker"" checkertype=""all"">");
#nullable restore
#line 65 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                                                     Write(app.T["entity"]);

#line default
#line hidden
#nullable disable
                WriteLiteral("</th>\r\n                                                <th class=\"xms-checker\" checkertype=\"cum\">");
#nullable restore
#line 66 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                                                     Write(app.T["security_read"]);

#line default
#line hidden
#nullable disable
                WriteLiteral("</th>\r\n                                                <th class=\"xms-checker\" checkertype=\"cum\">");
#nullable restore
#line 67 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                                                     Write(app.T["security_create"]);

#line default
#line hidden
#nullable disable
                WriteLiteral("</th>\r\n                                                <th class=\"xms-checker\" checkertype=\"cum\">");
#nullable restore
#line 68 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                                                     Write(app.T["security_update"]);

#line default
#line hidden
#nullable disable
                WriteLiteral("</th>\r\n                                                <th class=\"xms-checker\" checkertype=\"cum\">");
#nullable restore
#line 69 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                                                     Write(app.T["security_delete"]);

#line default
#line hidden
#nullable disable
                WriteLiteral("</th>\r\n                                                <th class=\"xms-checker\" checkertype=\"cum\">");
#nullable restore
#line 70 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                                                     Write(app.T["security_share"]);

#line default
#line hidden
#nullable disable
                WriteLiteral("</th>\r\n                                                <th class=\"xms-checker\" checkertype=\"cum\">");
#nullable restore
#line 71 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                                                     Write(app.T["security_assign"]);

#line default
#line hidden
#nullable disable
                WriteLiteral("</th>\r\n                                                <th class=\"xms-checker\" checkertype=\"cum\">");
#nullable restore
#line 72 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                                                     Write(app.T["security_append"]);

#line default
#line hidden
#nullable disable
                WriteLiteral("</th>\r\n                                                <th class=\"xms-checker\" checkertype=\"cum\">");
#nullable restore
#line 73 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                                                     Write(app.T["security_appendto"]);

#line default
#line hidden
#nullable disable
                WriteLiteral("</th>\r\n                                            </tr>\r\n                                        </thead>\r\n                                        <tbody>\r\n");
#nullable restore
#line 77 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                              
                                                var maskArray = new Dictionary<string, string>();
                                                maskArray["0"] = "/content/images/ico_18_role_x.gif";
                                                maskArray["1"] = "/content/images/ico_18_role_b.gif";
                                                maskArray["2"] = "/content/images/ico_18_role_l.gif";
                                                maskArray["4"] = "/content/images/ico_18_role_d.gif";
                                                maskArray["16"] = "/content/images/ico_18_role_g.gif";
                                            

#line default
#line hidden
#nullable disable
#nullable restore
#line 85 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                             foreach (var item in groupEntities)
                                            {
                                                var permissions = Model.EntityPermissions.Where(n => n.EntityId == item.EntityId).ToList();
                                                var read = permissions.Find(n => n.AccessRight == Xms.Core.AccessRightValue.Read);
                                                var create = permissions.Find(n => n.AccessRight == Xms.Core.AccessRightValue.Create);
                                                var update = permissions.Find(n => n.AccessRight == Xms.Core.AccessRightValue.Update);
                                                var delete = permissions.Find(n => n.AccessRight == Xms.Core.AccessRightValue.Delete);
                                                var share = permissions.Find(n => n.AccessRight == Xms.Core.AccessRightValue.Share);
                                                var assign = permissions.Find(n => n.AccessRight == Xms.Core.AccessRightValue.Assign);
                                                var append = permissions.Find(n => n.AccessRight == Xms.Core.AccessRightValue.Append);
                                                var appendto = permissions.Find(n => n.AccessRight == Xms.Core.AccessRightValue.AppendTo);

                                                var readPermission = read != null ? Model.RoleObjectAccess.Find(n => n.ObjectId == read.EntityPermissionId) : null;
                                                var createPermission = create != null ? Model.RoleObjectAccess.Find(n => n.ObjectId == create.EntityPermissionId) : null;
                                                var updatePermission = update != null ? Model.RoleObjectAccess.Find(n => n.ObjectId == update.EntityPermissionId) : null;
                                                var deletePermission = delete != null ? Model.RoleObjectAccess.Find(n => n.ObjectId == delete.EntityPermissionId) : null;
                                                var sharePermission = share != null ? Model.RoleObjectAccess.Find(n => n.ObjectId == share.EntityPermissionId) : null;
                                                var assignPermission = assign != null ? Model.RoleObjectAccess.Find(n => n.ObjectId == assign.EntityPermissionId) : null;
                                                var appendPermission = append != null ? Model.RoleObjectAccess.Find(n => n.ObjectId == append.EntityPermissionId) : null;
                                                var appendtoPermission = appendto != null ? Model.RoleObjectAccess.Find(n => n.ObjectId == appendto.EntityPermissionId) : null;

                                                var readMask = readPermission != null ? readPermission.AccessRightsMask.ToString().ToLower() : "0";
                                                var createMask = createPermission != null ? createPermission.AccessRightsMask.ToString().ToLower() : "0";
                                                var updateMask = updatePermission != null ? updatePermission.AccessRightsMask.ToString().ToLower() : "0";
                                                var deleteMask = deletePermission != null ? deletePermission.AccessRightsMask.ToString().ToLower() : "0";
                                                var shareMask = sharePermission != null ? sharePermission.AccessRightsMask.ToString().ToLower() : "0";
                                                var assignMask = assignPermission != null ? assignPermission.AccessRightsMask.ToString().ToLower() : "0";
                                                var appendMask = appendPermission != null ? appendPermission.AccessRightsMask.ToString().ToLower() : "0";
                                                var appendtoMask = appendtoPermission != null ? appendtoPermission.AccessRightsMask.ToString().ToLower() : "0";

#line default
#line hidden
#nullable disable
                WriteLiteral("                                                <tr>\r\n                                                    <td class=\"xms-checker\" checkertype=\"col\" data-name=\"");
#nullable restore
#line 115 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                                                                    Write(item.Name);

#line default
#line hidden
#nullable disable
                WriteLiteral("\" data-mask=\"");
#nullable restore
#line 115 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                                                                                           Write(item.EntityMask);

#line default
#line hidden
#nullable disable
                WriteLiteral("\">\r\n                                                        <label for=\"Name\">");
#nullable restore
#line 116 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                                     Write(item.LocalizedName);

#line default
#line hidden
#nullable disable
                WriteLiteral("</label>\r\n                                                    </td>\r\n                                                    <td>\r\n");
#nullable restore
#line 119 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                         if (read != null)
                                                        {

#line default
#line hidden
#nullable disable
                WriteLiteral("                                                            <input type=\"hidden\" name=\"ObjectId\"");
                BeginWriteAttribute("value", " value=\"", 9785, "\"", 9819, 1);
#nullable restore
#line 121 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
WriteAttributeValue("", 9793, read.EntityPermissionId, 9793, 26, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(" />\r\n                                                            <a href=\"javascript:void(0)\" class=\"xms-checker-target\">\r\n                                                                <img");
                BeginWriteAttribute("src", " src=\"", 10011, "\"", 10037, 1);
#nullable restore
#line 123 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
WriteAttributeValue("", 10017, maskArray[readMask], 10017, 20, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(" />\r\n                                                            </a>\r\n                                                            <input type=\"hidden\" name=\"mask\"");
                BeginWriteAttribute("value", " value=\"", 10201, "\"", 10220, 1);
#nullable restore
#line 125 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
WriteAttributeValue("", 10209, readMask, 10209, 11, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(" />\r\n");
#nullable restore
#line 126 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                        }

#line default
#line hidden
#nullable disable
                WriteLiteral("                                                    </td>\r\n                                                    <td>\r\n");
#nullable restore
#line 129 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                         if (create != null)
                                                        {

#line default
#line hidden
#nullable disable
                WriteLiteral("                                                            <input type=\"hidden\" name=\"ObjectId\"");
                BeginWriteAttribute("value", " value=\"", 10635, "\"", 10671, 1);
#nullable restore
#line 131 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
WriteAttributeValue("", 10643, create.EntityPermissionId, 10643, 28, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(" />\r\n                                                            <a href=\"javascript:void(0)\" class=\"xms-checker-target\">\r\n                                                                <img");
                BeginWriteAttribute("src", " src=\"", 10863, "\"", 10891, 1);
#nullable restore
#line 133 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
WriteAttributeValue("", 10869, maskArray[createMask], 10869, 22, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(" />\r\n                                                            </a>\r\n                                                            <input type=\"hidden\" name=\"mask\"");
                BeginWriteAttribute("value", " value=\"", 11055, "\"", 11076, 1);
#nullable restore
#line 135 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
WriteAttributeValue("", 11063, createMask, 11063, 13, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(" />\r\n");
#nullable restore
#line 136 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                        }

#line default
#line hidden
#nullable disable
                WriteLiteral("                                                    </td>\r\n                                                    <td>\r\n");
#nullable restore
#line 139 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                         if (update != null)
                                                        {

#line default
#line hidden
#nullable disable
                WriteLiteral("                                                            <input type=\"hidden\" name=\"ObjectId\"");
                BeginWriteAttribute("value", " value=\"", 11491, "\"", 11527, 1);
#nullable restore
#line 141 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
WriteAttributeValue("", 11499, update.EntityPermissionId, 11499, 28, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(" />\r\n                                                            <a href=\"javascript:void(0)\" class=\"xms-checker-target\">\r\n                                                                <img");
                BeginWriteAttribute("src", " src=\"", 11719, "\"", 11747, 1);
#nullable restore
#line 143 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
WriteAttributeValue("", 11725, maskArray[updateMask], 11725, 22, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(" />\r\n                                                            </a>\r\n                                                            <input type=\"hidden\" name=\"mask\"");
                BeginWriteAttribute("value", " value=\"", 11911, "\"", 11932, 1);
#nullable restore
#line 145 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
WriteAttributeValue("", 11919, updateMask, 11919, 13, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(" />\r\n");
#nullable restore
#line 146 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                        }

#line default
#line hidden
#nullable disable
                WriteLiteral("                                                    </td>\r\n                                                    <td>\r\n");
#nullable restore
#line 149 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                         if (delete != null)
                                                        {

#line default
#line hidden
#nullable disable
                WriteLiteral("                                                            <input type=\"hidden\" name=\"ObjectId\"");
                BeginWriteAttribute("value", " value=\"", 12347, "\"", 12383, 1);
#nullable restore
#line 151 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
WriteAttributeValue("", 12355, delete.EntityPermissionId, 12355, 28, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(" />\r\n                                                            <a href=\"javascript:void(0)\" class=\"xms-checker-target\">\r\n                                                                <img");
                BeginWriteAttribute("src", " src=\"", 12575, "\"", 12603, 1);
#nullable restore
#line 153 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
WriteAttributeValue("", 12581, maskArray[deleteMask], 12581, 22, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(" />\r\n                                                            </a>\r\n                                                            <input type=\"hidden\" name=\"mask\"");
                BeginWriteAttribute("value", " value=\"", 12767, "\"", 12788, 1);
#nullable restore
#line 155 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
WriteAttributeValue("", 12775, deleteMask, 12775, 13, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(" />\r\n");
#nullable restore
#line 156 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                        }

#line default
#line hidden
#nullable disable
                WriteLiteral("                                                    </td>\r\n                                                    <td>\r\n");
#nullable restore
#line 159 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                         if (share != null)
                                                        {

#line default
#line hidden
#nullable disable
                WriteLiteral("                                                            <input type=\"hidden\" name=\"ObjectId\"");
                BeginWriteAttribute("value", " value=\"", 13202, "\"", 13237, 1);
#nullable restore
#line 161 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
WriteAttributeValue("", 13210, share.EntityPermissionId, 13210, 27, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(" />\r\n                                                            <a href=\"javascript:void(0)\" class=\"xms-checker-target\">\r\n                                                                <img");
                BeginWriteAttribute("src", " src=\"", 13429, "\"", 13456, 1);
#nullable restore
#line 163 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
WriteAttributeValue("", 13435, maskArray[shareMask], 13435, 21, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(" />\r\n                                                            </a>\r\n                                                            <input type=\"hidden\" name=\"mask\"");
                BeginWriteAttribute("value", " value=\"", 13620, "\"", 13640, 1);
#nullable restore
#line 165 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
WriteAttributeValue("", 13628, shareMask, 13628, 12, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(" />\r\n");
#nullable restore
#line 166 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                        }

#line default
#line hidden
#nullable disable
                WriteLiteral("                                                    </td>\r\n                                                    <td>\r\n");
#nullable restore
#line 169 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                         if (assign != null)
                                                        {

#line default
#line hidden
#nullable disable
                WriteLiteral("                                                            <input type=\"hidden\" name=\"ObjectId\"");
                BeginWriteAttribute("value", " value=\"", 14055, "\"", 14091, 1);
#nullable restore
#line 171 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
WriteAttributeValue("", 14063, assign.EntityPermissionId, 14063, 28, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(" />\r\n                                                            <a href=\"javascript:void(0)\" class=\"xms-checker-target\">\r\n                                                                <img");
                BeginWriteAttribute("src", " src=\"", 14283, "\"", 14311, 1);
#nullable restore
#line 173 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
WriteAttributeValue("", 14289, maskArray[assignMask], 14289, 22, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(" />\r\n                                                            </a>\r\n                                                            <input type=\"hidden\" name=\"mask\"");
                BeginWriteAttribute("value", " value=\"", 14475, "\"", 14496, 1);
#nullable restore
#line 175 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
WriteAttributeValue("", 14483, assignMask, 14483, 13, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(" />\r\n");
#nullable restore
#line 176 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                        }

#line default
#line hidden
#nullable disable
                WriteLiteral("                                                    </td>\r\n                                                    <td>\r\n");
#nullable restore
#line 179 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                         if (append != null)
                                                        {

#line default
#line hidden
#nullable disable
                WriteLiteral("                                                            <input type=\"hidden\" name=\"ObjectId\"");
                BeginWriteAttribute("value", " value=\"", 14911, "\"", 14947, 1);
#nullable restore
#line 181 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
WriteAttributeValue("", 14919, append.EntityPermissionId, 14919, 28, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(" />\r\n                                                            <a href=\"javascript:void(0)\" class=\"xms-checker-target\">\r\n                                                                <img");
                BeginWriteAttribute("src", " src=\"", 15139, "\"", 15167, 1);
#nullable restore
#line 183 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
WriteAttributeValue("", 15145, maskArray[appendMask], 15145, 22, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(" />\r\n                                                            </a>\r\n                                                            <input type=\"hidden\" name=\"mask\"");
                BeginWriteAttribute("value", " value=\"", 15331, "\"", 15352, 1);
#nullable restore
#line 185 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
WriteAttributeValue("", 15339, appendMask, 15339, 13, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(" />\r\n");
#nullable restore
#line 186 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                        }

#line default
#line hidden
#nullable disable
                WriteLiteral("                                                    </td>\r\n                                                    <td>\r\n");
#nullable restore
#line 189 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                         if (appendto != null)
                                                        {

#line default
#line hidden
#nullable disable
                WriteLiteral("                                                            <input type=\"hidden\" name=\"ObjectId\"");
                BeginWriteAttribute("value", " value=\"", 15769, "\"", 15807, 1);
#nullable restore
#line 191 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
WriteAttributeValue("", 15777, appendto.EntityPermissionId, 15777, 30, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(" />\r\n                                                            <a href=\"javascript:void(0)\" class=\"xms-checker-target\">\r\n                                                                <img");
                BeginWriteAttribute("src", " src=\"", 15999, "\"", 16029, 1);
#nullable restore
#line 193 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
WriteAttributeValue("", 16005, maskArray[appendtoMask], 16005, 24, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(" />\r\n                                                            </a>\r\n                                                            <input type=\"hidden\" name=\"mask\"");
                BeginWriteAttribute("value", " value=\"", 16193, "\"", 16216, 1);
#nullable restore
#line 195 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
WriteAttributeValue("", 16201, appendtoMask, 16201, 15, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(" />\r\n");
#nullable restore
#line 196 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                        }

#line default
#line hidden
#nullable disable
                WriteLiteral("                                                    </td>\r\n                                                </tr>\r\n");
#nullable restore
#line 199 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                            }

#line default
#line hidden
#nullable disable
                WriteLiteral("                                        </tbody>\r\n                                    </table>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n");
#nullable restore
#line 205 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                    }

#line default
#line hidden
#nullable disable
                WriteLiteral("                </div>\r\n                <div class=\"form-group col-sm-12\">\r\n                    <table class=\"table\">\r\n                        <caption><strong>");
#nullable restore
#line 209 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                    Write(app.T["entitypermission_mask_explain"]);

#line default
#line hidden
#nullable disable
                WriteLiteral("</strong></caption>\r\n                        <tr>\r\n                            <td><img src=\"/content/images/ico_18_role_x.gif\" />");
#nullable restore
#line 211 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                                          Write(app.T["entitypermission_mask_none"]);

#line default
#line hidden
#nullable disable
                WriteLiteral("</td>\r\n                            <td><img src=\"/content/images/ico_18_role_b.gif\" />");
#nullable restore
#line 212 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                                          Write(app.T["entitypermission_mask_self"]);

#line default
#line hidden
#nullable disable
                WriteLiteral("</td>\r\n                            <td><img src=\"/content/images/ico_18_role_l.gif\" />");
#nullable restore
#line 213 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                                          Write(app.T["entitypermission_mask_businessunit"]);

#line default
#line hidden
#nullable disable
                WriteLiteral("</td>\r\n                            <td><img src=\"/content/images/ico_18_role_d.gif\" />");
#nullable restore
#line 214 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                                          Write(app.T["entitypermission_mask_businessunitandchild"]);

#line default
#line hidden
#nullable disable
                WriteLiteral("</td>\r\n                            <td><img src=\"/content/images/ico_18_role_g.gif\" />");
#nullable restore
#line 215 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                                          Write(app.T["entitypermission_mask_organization"]);

#line default
#line hidden
#nullable disable
                WriteLiteral(@"</td>
                        </tr>
                    </table>
                </div>
                <div class=""form-group col-sm-12 text-center"" id=""form-buttons"">
                    <button type=""submit"" class=""btn btn-primary""><span class=""glyphicon glyphicon-saved""></span> ");
#nullable restore
#line 220 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                                                                             Write(app.T["save"]);

#line default
#line hidden
#nullable disable
                WriteLiteral("</button>\r\n                    <button type=\"reset\" class=\"btn btn-default\"><span class=\"glyphicon glyphicon-refresh\"></span> ");
#nullable restore
#line 221 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                                                                              Write(app.T["reset"]);

#line default
#line hidden
#nullable disable
                WriteLiteral("</button>\r\n                </div>\r\n            ");
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_0);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_1);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_2);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_3);
            BeginAddHtmlAttributeValues(__tagHelperExecutionContext, "action", 3, global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
            AddHtmlAttributeValue("", 1329, "/", 1329, 1, true);
#nullable restore
#line 33 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
AddHtmlAttributeValue("", 1330, app.OrganizationUniqueName, 1330, 29, false);

#line default
#line hidden
#nullable disable
            AddHtmlAttributeValue("", 1359, "/api/role/SaveRolePermissions", 1359, 29, true);
            EndAddHtmlAttributeValues(__tagHelperExecutionContext);
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper.Method = (string)__tagHelperAttribute_4.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_4);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral(@"
        </div>
    </div>
</div>
<div class=""pull-right hide"" id=""mask_dropdownmenu"">
    <div class=""dropdown"">
        <button type=""button"" class=""btn btn-link dropdown-toggle"" id=""mask_dropdownbtn"" data-toggle=""dropdown"">
            <span class=""caret""></span>
        </button>
        <ul class=""dropdown-menu pull-right"" role=""menu"" aria-labelledby=""mask_dropdownbtn"">
            <li role=""presentation"" class=""dropdown-header"">选择权限级别</li>
            <li role=""presentation"">
                <a role=""menuitem"" tabindex=""-1"" href=""javascript:;"" data-mask=""0""><img src=""/content/images/ico_18_role_x.gif"" />");
#nullable restore
#line 235 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                                                                                             Write(app.T["entitypermission_mask_none"]);

#line default
#line hidden
#nullable disable
            WriteLiteral("</a>\r\n            </li>\r\n            <li role=\"presentation\">\r\n                <a role=\"menuitem\" tabindex=\"-1\" href=\"javascript:;\" data-mask=\"1\"><img src=\"/content/images/ico_18_role_b.gif\" />");
#nullable restore
#line 238 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                                                                                             Write(app.T["entitypermission_mask_self"]);

#line default
#line hidden
#nullable disable
            WriteLiteral("</a>\r\n            </li>\r\n            <li role=\"presentation\">\r\n                <a role=\"menuitem\" tabindex=\"-1\" href=\"javascript:;\" data-mask=\"2\"><img src=\"/content/images/ico_18_role_l.gif\" />");
#nullable restore
#line 241 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                                                                                             Write(app.T["entitypermission_mask_businessunit"]);

#line default
#line hidden
#nullable disable
            WriteLiteral("</a>\r\n            </li>\r\n            <li role=\"presentation\">\r\n                <a role=\"menuitem\" tabindex=\"-1\" href=\"javascript:;\" data-mask=\"4\"><img src=\"/content/images/ico_18_role_d.gif\" />");
#nullable restore
#line 244 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                                                                                             Write(app.T["entitypermission_mask_businessunitandchild"]);

#line default
#line hidden
#nullable disable
            WriteLiteral("</a>\r\n            </li>\r\n            <li role=\"presentation\">\r\n                <a role=\"menuitem\" tabindex=\"-1\" href=\"javascript:;\" data-mask=\"16\"><img src=\"/content/images/ico_18_role_g.gif\" />");
#nullable restore
#line 247 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
                                                                                                                              Write(app.T["entitypermission_mask_organization"]);

#line default
#line hidden
#nullable disable
            WriteLiteral("</a>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>\r\n");
            DefineSection("Header", async() => {
                WriteLiteral("\r\n    <style>\r\n        .dropdown-menu {\r\n            min-width: 100px;\r\n        }\r\n    </style>\r\n");
            }
            );
            DefineSection("Scripts", async() => {
                WriteLiteral("\r\n    <script");
                BeginWriteAttribute("src", " src=\"", 19873, "\"", 19943, 2);
                WriteAttributeValue("", 19879, "/content/js/jquery.form.js?v=", 19879, 29, true);
#nullable restore
#line 260 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
WriteAttributeValue("", 19908, app.PlatformSettings.VersionNumber, 19908, 35, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral("></script>\r\n    <script");
                BeginWriteAttribute("src", " src=\"", 19967, "\"", 20061, 2);
                WriteAttributeValue("", 19973, "/content/js/jquery-validate/jquery.validate.min.js?v=", 19973, 53, true);
#nullable restore
#line 261 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
WriteAttributeValue("", 20026, app.PlatformSettings.VersionNumber, 20026, 35, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral("></script>\r\n    <script");
                BeginWriteAttribute("src", " src=\"", 20085, "\"", 20188, 2);
                WriteAttributeValue("", 20091, "/content/js/jquery-validate/localization/messages_zh.min.js?v=", 20091, 62, true);
#nullable restore
#line 262 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Security\EditRoleEntityPermissions.cshtml"
WriteAttributeValue("", 20153, app.PlatformSettings.VersionNumber, 20153, 35, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(@"></script>
    <script>
        var FlagArray = new Array();
        FlagArray[0] = ['none', '/content/images/ico_18_role_x.gif', 0];
        FlagArray[1] = ['self', '/content/images/ico_18_role_b.gif', 1];
        FlagArray[2] = ['businessunit', '/content/images/ico_18_role_l.gif', 2];
        FlagArray[3] = ['businessunitandchild', '/content/images/ico_18_role_d.gif', 4];
        FlagArray[4] = ['organization', '/content/images/ico_18_role_g.gif', 16];

        $(function () {
            //表单验证
            Xms.Web.Form($(""#editform""));
            $('#myTab li:first').addClass('active');
            $('.tab-pane:first').addClass('in active');
            function setMaskState(obj) {
                var $obj = $(obj);
                var flag = $obj.find('img').prop('src');
                var mask = $obj.next().val();
                var index = 0;
                $(FlagArray).each(function (i, n) {
                    if (n[2] == mask || n[0] == 'none') {
                        index");
                WriteLiteral(@" = i + 1;
                        return;
                    }
                });
                if (index == FlagArray.length) index = 0;
                mask = FlagArray[index][2];
                $obj.find('img').prop('src', FlagArray[index][1]);
                $obj.next().val(mask);
            }
            function setAllChecker(parentTable) {
                var checkers = parentTable.find("".xms-checker-target"");
                checkers.each(function () {
                    if ($(this).parents('tr:first').find('td:eq(0)').attr('data-mask') !== 'Organization') {
                        setMaskState(this);
                    } else {
                        scalingCul(this);
                    }

                });
            }

            function setCumChecker(parentTable, index) {
                var checkers = parentTable.children(""tbody"").find(""tr"");
                checkers.each(function () {
                    var item = $(this).find(""td"").eq(index);
          ");
                WriteLiteral(@"          var ppp = item.find("".xms-checker-target"");
                    if (ppp.parents('tr:first').find('td:eq(0)').attr('data-mask') !== 'Organization') {
                        setMaskState(item.children('a'));
                    } else {
                        scalingCul(item.children('a'));
                    }
                });
            }

            function setColChecker(parentTable, index) {
                var checkers = parentTable.children(""tbody"").find(""tr"").eq(index).find(""td"");
                var ppp = parentTable.children(""tbody"").find(""tr"");
                checkers.each(function () {
                    var item = $(this).find(""a.xms-checker-target"");
                    if (item.parents('tr').find('td:eq(0)').attr('data-mask') !== 'Organization') {
                        setMaskState(item);
                    } else {
                        scalingCul(item);
                    }

                });
            }

            function scalingCul(obj) ");
                WriteLiteral(@"{
                var FlagArrays = new Array();
                FlagArrays[0] = ['none', '/content/images/ico_18_role_x.gif', 0];
                FlagArrays[1] = ['organization', '/content/images/ico_18_role_g.gif', 1];
                var $obj = $(obj);
                var flag = $obj.find('img').prop('src');
                var mask = $obj.next().val()
                if (mask) {
                    var index = 0;
                    $(FlagArrays).each(function (i, n) {
                        if (n[2] == mask || n[0] == 'none') {
                            index = i + 1;
                            return;
                        }
                    });
                } else {
                    mask = $obj.attr('data-mask');
                    var index = 0;
                    $(FlagArrays).each(function (i, n) {
                        if (n[2] == mask || n[0] == 'none') {
                            index = i;
                            return;
                        }
  ");
                WriteLiteral(@"                  });
                }
                if (index == FlagArrays.length) index = 0;
                mask = FlagArrays[index][2];
                $obj.find('img').prop('src', FlagArrays[index][1]);
                $obj.next().val(mask);
            }

            function dianji(obj) {
                var chart = 0;
                obj.click(function () {
                    chart = chart + 1;
                })
                if (chart == 1) {
                    //$('.xms-checker-target').find('img').prop('src', FlagArray[0][1]);
                    //$('.xms-checker-target').next().val(FlagArray[0][0]);
                    alert(sadsad);
                }
            }

            $('#entities').on('click', 'a', function (e) {
                if ($(this).parents('tr:first').find('td:eq(0)').attr('data-mask') !== 'Organization') {
                    //  setMaskState(this);
                } else {
                    scalingCul(this);
                }
            ");
                WriteLiteral(@"});

            $("".xms-checker"").on(""click"", function () {
                var index = $(this).parent(""tr"").find(this).index(),
                    type = $(this).attr(""checkertype""),
                    parentTable = $(this).parents(""table"");

                if (type === ""all"") {
                    setAllChecker(parentTable);
                    //dianji(this);
                } else if (type === ""cum"") {
                    setCumChecker(parentTable, index);
                } else if (type === ""col"") {
                    // index = $(this).parent(""tr"").index();
                    // setColChecker(parentTable, index);
                }
            });

            //$("".xms-checker"").one(""click"", function () {
            //    var index = $(this).parent(""tr"").find(this).index(),
            //        type = $(this).attr(""checkertype""),
            //        parentTable = $(this).parents(""table"");
            //    if (type === ""all"") {
            //        $('.xms-checker-targe");
                WriteLiteral(@"t').find('img').prop('src', FlagArray[0][1]);
            //        $('.xms-checker-target').next().val(FlagArray[0][0]);
            //    }
            //});
            //$("".xms-checker"").one(""click"", function () {
            //    var index = $(this).parent(""tr"").find(this).index(),
            //        type = $(this).attr(""checkertype""),
            //        parentTable = $(this).parents(""table"");
            //    if (type === ""cum"") {
            //        var checkers = parentTable.children(""tbody"").find(""tr"");
            //        checkers.each(function () {
            //            var item = $(this).find(""td"").eq(index);
            //            item.find('.xms-checker-target>img').prop('src', FlagArray[0][1]);
            //            item.find('a').next().val(FlagArray[0][0]);
            //        })
            //    }
            //});

            $('.xms-checker-target').on('click', function (e) {
                e.stopPropagation();
                if ($(this).pa");
                WriteLiteral(@"rents('tr').find('td:eq(0)').attr('data-mask') !== 'Organization') {
                    setMaskState(this)
                } else {
                    scalingCul(this);
                }
            })
            //$("".xms-checker"").one(""click"", function () {
            //    var index = $(this).parent(""tr"").find(this).index(),
            //        type = $(this).attr(""checkertype""),
            //        parentTable = $(this).parents(""table"");
            //    if (type === ""col"") {
            //        index = $(this).parent(""tr"").index();
            //        var checkers = parentTable.children(""tbody"").find(""tr"").eq(index).find(""td"");
            //        checkers.each(function () {
            //            var item = $(this).find(""a.xms-checker-target"");
            //            if (item.length > 0) {
            //                item.find('img').prop('src', FlagArray[0][1]);
            //                item.next().val(FlagArray[0][0]);
            //            }
        ");
                WriteLiteral(@"    //        })
            //    }
            //});
            appendMaskDropdownMenus();
            $('.xms-checker-target').addClass('btn btn-link');
            loadResourceOwners();
        });

        function loadResourceOwners() {
            Xms.Web.GetJson(ORG_SERVERURL + ""/api/security/ResourceOwners"", null, function (data) {
                if (!data.IsSuccess) return;
                var items = JSON.parse(data.Content);
                var resourceName = $('#ResourceName').val().toLowerCase();
                var $container = $('#owners');
                $(items).each(function (i, n) {
                    var url = (n.uiendpoint || '/role/editrolepermissions') + '?roleid=' + $(""#RoleId"").val() + '&resourcename=' + n.modulename;
                    $container.append($('<button type=""button"" class=""btn btn-sm ' + (resourceName == n.modulename.toLowerCase() ? 'btn-info' : 'btn-default') + '"" data-url=""' + url + '"">' + n.modulelocalizedname + '</button>'));
                });");
                WriteLiteral(@"
                $container.find('button').on('click', null, function () {
                    Xms.Web.Redirect($(this).attr('data-url'));
                });
            });
        }

        function appendMaskDropdownMenus() {
            var m = $('#mask_dropdownmenu');
            $('#entities>tbody>tr').each(function (i, tr) {
                var type = $(tr).find('.xms-checker').attr('data-mask');
                var tdLen = 0;
                $(tr).find('td:gt(0)').each(function (k, td) {
                    tdLen = k;
                    var el = m.clone(true).removeClass('hide');
                    el.prop('id', 'mask_dropdownmenu_' + k);
                    if (type == 'Organization') {
                        el.find('a').each(function (j, ela) {
                            var maskValue = $(ela).attr('data-mask').trim().toLowerCase();
                            if (maskValue != 'none' && maskValue != 'organization') {
                                $(ela).parent('li').addC");
                WriteLiteral(@"lass('hide');
                            }
                        })
                    }
                    el.find('a').on('click', null, function (e) {
                        el.parents('td:first').find('input[name=mask]').val($(e.target).attr('data-mask'));
                        el.parents('td:first').find('input[name=mask]').siblings('.xms-checker-target').eq(0).find('img').prop('src', $(e.target).find('img').prop('src'));
                    });
                    $(td).find('input[name=mask]').after(el);
                });
                var headerEl = m.clone(true).removeClass('hide');
                headerEl.find('a').on('click', null, function (e) {
                    var inputs = headerEl.parents('tr:first').find('input[name=mask]');
                    inputs.val($(e.target).attr('data-mask'));
                    inputs.each(function () {
                        $(this).siblings('.xms-checker-target').eq(0).find('img').prop('src', $(e.target).find('img').prop('src'));
");
                WriteLiteral(@"                    })
                });
                $(tr).each(function () {
                    var $td = $(this).find('.xms-checker');
                    var mask = $td.attr('data-mask');
                    if (mask && mask != '') {
                        mask = mask.toLowerCase();
                        if (mask == 'organization') {
                            headerEl.find('a').each(function (j, ela) {
                                var maskValue = $(ela).attr('data-mask').trim().toLowerCase();
                                if (maskValue != 'none' && maskValue != 'organization') {
                                    $(ela).parent('li').addClass('hide');
                                }
                            })
                        }
                    }

                    $(this).find('.xms-checker').append(headerEl);
                });
            });
        }
    </script>
");
            }
            );
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public Xms.Web.Framework.Context.IWebAppContext app { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<Xms.Web.Models.EditRoleEntityPermissionsModel> Html { get; private set; }
    }
}
#pragma warning restore 1591
