#pragma checksum "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "063c666ef77055074643c8fe7337cea85e6897b7"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Flow_WorkFlowInstanceDetail), @"mvc.1.0.view", @"/Views/Flow/WorkFlowInstanceDetail.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "G:\projects\xms_v2\Presentation\Xms.Web\Views\_ViewImports.cshtml"
using Xms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "G:\projects\xms_v2\Presentation\Xms.Web\Views\_ViewImports.cshtml"
using Xms.Core;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "G:\projects\xms_v2\Presentation\Xms.Web\Views\_ViewImports.cshtml"
using Xms.Infrastructure;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "G:\projects\xms_v2\Presentation\Xms.Web\Views\_ViewImports.cshtml"
using Xms.Infrastructure.Utility;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "G:\projects\xms_v2\Presentation\Xms.Web\Views\_ViewImports.cshtml"
using Xms.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "G:\projects\xms_v2\Presentation\Xms.Web\Views\_ViewImports.cshtml"
using Xms.Web.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "G:\projects\xms_v2\Presentation\Xms.Web\Views\_ViewImports.cshtml"
using Xms.Web.Framework;

#line default
#line hidden
#nullable disable
#nullable restore
#line 1 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
using Xms.Flow.Abstractions;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"063c666ef77055074643c8fe7337cea85e6897b7", @"/Views/Flow/WorkFlowInstanceDetail.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"4b0011d9a8909cdacaf42363c4ba3a5683bc0ece", @"/Views/_ViewImports.cshtml")]
    public class Views_Flow_WorkFlowInstanceDetail : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<Xms.Web.Models.WorkFlowInstanceDetailModel>
    {
        #line hidden
        #pragma warning disable 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        #pragma warning restore 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral("\r\n");
#nullable restore
#line 4 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
  
    Layout = null;

#line default
#line hidden
#nullable disable
            WriteLiteral(@"
<!-- 审批（Modal） -->
<div class=""modal fade"" id=""wfpModal"" tabindex=""-1"" role=""dialog""
     aria-labelledby=""wfpModalLabel"" aria-hidden=""true"">
    <div class=""modal-dialog modal-lg"">
        <div class=""modal-content"">
            <div class=""modal-header"">
                <button type=""button"" class=""close"" data-dismiss=""modal""
                        aria-hidden=""true"">
                    ×
                </button>
                <h4 class=""modal-title"" id=""wfpModalLabel"">
                    审批详情 - ");
#nullable restore
#line 19 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
                       Write(Model.FlowInfo != null ? Model.FlowInfo.Name : "");

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n                </h4>\r\n            </div>\r\n            <div class=\"modal-body\" style=\"height:500px;overflow-y:scroll;\">\r\n                <div class=\"hide\" id=\"recordWorkFlowInfos\">");
#nullable restore
#line 23 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
                                                      Write(Model.Steps.SerializeToJson());

#line default
#line hidden
#nullable disable
            WriteLiteral(@"</div>
                <div id=""recordWorkFlowInfosLine"">
                </div>
                <div class=""table-responsive"" id=""gridview"" style=""min-height:350px;"">
                    <table class=""table table-hover table-striped table-condensed"" id=""datatable"" data-refresh=""rebind()"" data-ajax=""true"" data-ajaxcontainer=""gridview"" data-ajaxcallback=""ajaxgrid_reset()"" data-sortby=""");
#nullable restore
#line 27 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
                                                                                                                                                                                                                      Write(Model.SortBy.ToLower());

#line default
#line hidden
#nullable disable
            WriteLiteral("\" data-sortdirection=\"");
#nullable restore
#line 27 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
                                                                                                                                                                                                                                                                   Write(Model.SortDirection);

#line default
#line hidden
#nullable disable
            WriteLiteral("\" data-pageurl=\"");
#nullable restore
#line 27 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
                                                                                                                                                                                                                                                                                                       Write(app.Url);

#line default
#line hidden
#nullable disable
            WriteLiteral(@""" style=""display:none;"">
                        <thead>
                            <tr>
                                <th width=""20%"">
                                    步骤
                                </th>
                                <th width=""15%"">
                                    处理者
                                </th>
                                <th width=""15%"">
                                    状态
                                </th>
                                <th>
                                    意见/说明
                                </th>
                                <th width=""15%"">
                                    附件
                                </th>
                                <th width=""15%"">
                                    处理时间
                                </th>
                            </tr>
                        </thead>
                        <tbody>
");
#nullable restore
#line 51 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
                              
                                var __flowStep = 0;
                                foreach (var runner in Model.Items)
                                {
                                    __flowStep++;

#line default
#line hidden
#nullable disable
            WriteLiteral("                                    <tr data-flowstep=\"");
#nullable restore
#line 56 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
                                                  Write(__flowStep);

#line default
#line hidden
#nullable disable
            WriteLiteral("\" class=\"workflow-items-timeline\" data-type=\"timeline\">\r\n                                        <th colspan=\"6\">\r\n                                            <h4><span class=\"label label-primary\">");
#nullable restore
#line 58 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
                                                                             Write(runner.CreatedOn.ToString("MM-dd HH:mm"));

#line default
#line hidden
#nullable disable
            WriteLiteral(" - ");
#nullable restore
#line 58 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
                                                                                                                          Write(runner.CompletedOn.HasValue ? runner.CompletedOn.Value.ToString("MM-dd HH:mm") : "现在");

#line default
#line hidden
#nullable disable
            WriteLiteral("</span></h4>\r\n                                        </th>\r\n                                    </tr>\r\n                                    <tr data-flowstep=\"");
#nullable restore
#line 61 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
                                                  Write(__flowStep);

#line default
#line hidden
#nullable disable
            WriteLiteral("\" class=\"workflow-items-start\" data-type=\"start\">\r\n                                        <td class=\"workflow-item-label\">1.发起申请</td>\r\n                                        <td class=\"workflow-item-handler\">");
#nullable restore
#line 63 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
                                                                     Write(runner.ApplicantName);

#line default
#line hidden
#nullable disable
            WriteLiteral("</td>\r\n                                        <td class=\"workflow-item-state\"><span class=\"label label-success\">已发起</span></td>\r\n                                        <td class=\"workflow-item-desc\">");
#nullable restore
#line 65 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
                                                                  Write(runner.Description);

#line default
#line hidden
#nullable disable
            WriteLiteral("</td>\r\n                                        <td class=\"workflow-item-attach\">\r\n");
#nullable restore
#line 67 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
                                             if (runner.Attachments > 0)
                                            {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                                <a");
            BeginWriteAttribute("href", " href=\"", 3849, "\"", 3966, 4);
#nullable restore
#line 69 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
WriteAttributeValue("", 3856, "/" + app.OrganizationUniqueName, 3856, 35, false);

#line default
#line hidden
#nullable disable
            WriteAttributeValue("", 3891, "/flow/WorkFlowAttachments?processid=", 3891, 36, true);
#nullable restore
#line 69 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
WriteAttributeValue("", 3927, runner.WorkFlowInstanceId, 3927, 26, false);

#line default
#line hidden
#nullable disable
            WriteAttributeValue("", 3953, "&preview=true", 3953, 13, true);
            EndWriteAttribute();
            WriteLiteral(" target=\"_blank\">预览</a>\r\n                                                <a");
            BeginWriteAttribute("href", " href=\"", 4042, "\"", 4146, 3);
#nullable restore
#line 70 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
WriteAttributeValue("", 4049, "/" + app.OrganizationUniqueName, 4049, 35, false);

#line default
#line hidden
#nullable disable
            WriteAttributeValue("", 4084, "/flow/WorkFlowAttachments?processid=", 4084, 36, true);
#nullable restore
#line 70 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
WriteAttributeValue("", 4120, runner.WorkFlowInstanceId, 4120, 26, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" target=\"_blank\">下载</a>\r\n");
#nullable restore
#line 71 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
                                            }

#line default
#line hidden
#nullable disable
            WriteLiteral("                                        </td>\r\n                                        <td class=\"workflow-item-date\">");
#nullable restore
#line 73 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
                                                                  Write(runner.CreatedOn.ToString("MM-dd HH:mm"));

#line default
#line hidden
#nullable disable
            WriteLiteral("</td>\r\n                                    </tr>\r\n");
#nullable restore
#line 75 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"

                                    foreach (var step in runner.Steps)
                                    {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                        <tr data-flowstep=\"");
#nullable restore
#line 78 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
                                                      Write(__flowStep);

#line default
#line hidden
#nullable disable
            WriteLiteral("\" class=\"workflow-items\" data-type=\"step\" data-step=\"");
#nullable restore
#line 78 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
                                                                                                                       Write(step.StepOrder + 1);

#line default
#line hidden
#nullable disable
            WriteLiteral("\">\r\n                                            <td class=\"workflow-item-label\">");
#nullable restore
#line 79 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
                                                                        Write((step.StepOrder + 1) + "." + step.Name);

#line default
#line hidden
#nullable disable
            WriteLiteral("</td>\r\n                                            <td class=\"workflow-item-handler\">");
#nullable restore
#line 80 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
                                                                         Write(step.HandlerIdName);

#line default
#line hidden
#nullable disable
            WriteLiteral("</td>\r\n                                            <td class=\"workflow-item-state\" data-state=\"");
#nullable restore
#line 81 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
                                                                                   Write(step.StateCode);

#line default
#line hidden
#nullable disable
            WriteLiteral("\">\r\n");
#nullable restore
#line 82 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
                                                 if (step.StateCode == WorkFlowProcessState.Processing)
                                                {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                                    <span class=\"label label-info\">处理中</span>\r\n");
#nullable restore
#line 85 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
                                                }
                                                else if (step.StateCode == WorkFlowProcessState.Waiting)
                                                {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                                    <span class=\"label label-default\">等待中</span>\r\n");
#nullable restore
#line 89 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
                                                }
                                                else if (step.StateCode == WorkFlowProcessState.Passed)
                                                {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                                    <span class=\"label label-success\"><span class=\"glyphicon glyphicon-ok\"></span> 通过</span>\r\n");
#nullable restore
#line 93 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
                                                }
                                                else if (step.StateCode == WorkFlowProcessState.UnPassed)
                                                {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                                    <span class=\"label label-danger\"><span class=\"glyphicon glyphicon-remove\"></span> 不通过</span>\r\n");
#nullable restore
#line 97 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
                                                }
                                                else if (step.StateCode == WorkFlowProcessState.Disabled)
                                                {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                                    <span class=\"label label-default\">作废</span>\r\n");
#nullable restore
#line 101 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
                                                }

#line default
#line hidden
#nullable disable
            WriteLiteral("                                            </td>\r\n                                            <td class=\"workflow-item-desc\">");
#nullable restore
#line 103 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
                                                                      Write(step.Description);

#line default
#line hidden
#nullable disable
            WriteLiteral("</td>\r\n                                            <td class=\"workflow-item-attach\">\r\n");
#nullable restore
#line 105 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
                                                 if (step.Attachments > 0)
                                                {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                                    <a");
            BeginWriteAttribute("href", " href=\"", 7052, "\"", 7166, 4);
#nullable restore
#line 107 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
WriteAttributeValue("", 7059, "/" + app.OrganizationUniqueName, 7059, 35, false);

#line default
#line hidden
#nullable disable
            WriteAttributeValue("", 7094, "/flow/WorkFlowAttachments?processid=", 7094, 36, true);
#nullable restore
#line 107 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
WriteAttributeValue("", 7130, step.WorkFlowProcessId, 7130, 23, false);

#line default
#line hidden
#nullable disable
            WriteAttributeValue("", 7153, "&preview=true", 7153, 13, true);
            EndWriteAttribute();
            WriteLiteral(" target=\"_blank\">预览</a>\r\n                                                    <a");
            BeginWriteAttribute("href", " href=\"", 7246, "\"", 7347, 3);
#nullable restore
#line 108 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
WriteAttributeValue("", 7253, "/" + app.OrganizationUniqueName, 7253, 35, false);

#line default
#line hidden
#nullable disable
            WriteAttributeValue("", 7288, "/flow/WorkFlowAttachments?processid=", 7288, 36, true);
#nullable restore
#line 108 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
WriteAttributeValue("", 7324, step.WorkFlowProcessId, 7324, 23, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" target=\"_blank\">下载</a>\r\n");
#nullable restore
#line 109 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
                                                }

#line default
#line hidden
#nullable disable
            WriteLiteral("                                            </td>\r\n                                            <td class=\"workflow-item-date\">");
#nullable restore
#line 111 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
                                                                       Write(step.HandleTime.HasValue ? step.HandleTime.Value.ToString("MM-dd HH:mm") : "");

#line default
#line hidden
#nullable disable
            WriteLiteral("</td>\r\n                                        </tr>\r\n");
#nullable restore
#line 113 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
                                    }
                                    if (runner.StateCode == WorkFlowProcessState.Canceled)
                                    {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                        <tr data-flowstep=\"");
#nullable restore
#line 116 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
                                                      Write(__flowStep);

#line default
#line hidden
#nullable disable
            WriteLiteral("\" class=\"workflow-items-end\" data-type=\"end\">\r\n                                            <td class=\"workflow-item-label\">*结束</td>\r\n                                            <td class=\"workflow-item-handler\">");
#nullable restore
#line 118 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
                                                                         Write(runner.ApplicantName);

#line default
#line hidden
#nullable disable
            WriteLiteral("</td>\r\n                                            <td class=\"workflow-item-state\"><span class=\"label label-danger\">已撤消</span></td>\r\n                                            <td class=\"workflow-item-desc\">");
#nullable restore
#line 120 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
                                                                      Write(runner.Description);

#line default
#line hidden
#nullable disable
            WriteLiteral("</td>\r\n                                            <td class=\"workflow-item-attach\"></td>\r\n                                            <td class=\"workflow-item-date\">");
#nullable restore
#line 122 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
                                                                       Write(runner.CompletedOn.HasValue ? runner.CompletedOn.Value.ToString("MM-dd HH:mm") : "");

#line default
#line hidden
#nullable disable
            WriteLiteral("</td>\r\n                                        </tr>\r\n");
#nullable restore
#line 124 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
                                    }
                                }
                            

#line default
#line hidden
#nullable disable
            WriteLiteral(@"                        </tbody>
                    </table>
                    <div><button type=""button"" class=""btn btn-primary btn-sm"" id=""showhideFlow""><span class=""glyphicon glyphicon-equalizer""></span> 显示流程图</button></div>
                    <div id=""workflowWrapBox"" style=""display:none; "">
                        <div class=""form-group row mt-2""");
            BeginWriteAttribute("style", " style=\"", 9155, "\"", 9163, 0);
            EndWriteAttribute();
            WriteLiteral(@">
                            <div class=""col-sm-5""><select id=""filterByDateTime"" class=""form-control""></select></div>
                        </div>
                        <div class=""mt-2"" id=""workflowWrap"" style=""position:relative; "">
                            <div id=""workflowWrap"" style=""width:100%; height:500px; position:relative;"">
                            </div>
                        </div>
                    </div>
                    <div class=""workflow-changer mt-2""></div>
                </div>
                <div class=""tooltip xms-toggle-tolltip"" id=""infoTooltip"" role=""tooltip"">
                    <div class=""flowinfos"" id=""flowinfos""></div>
                </div>

                <script");
            BeginWriteAttribute("src", " src=\"", 9901, "\"", 9965, 2);
            WriteAttributeValue("", 9907, "/content/js/fetch.js?v=", 9907, 23, true);
#nullable restore
#line 145 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
WriteAttributeValue("", 9930, app.PlatformSettings.VersionNumber, 9930, 35, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral("></script>\r\n                <script");
            BeginWriteAttribute("src", " src=\"", 10001, "\"", 10114, 2);
            WriteAttributeValue("", 10007, "/content/js/bootstrap-datepicker-1.5.0/js/bootstrap-datepicker.min.js?v=", 10007, 72, true);
#nullable restore
#line 146 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
WriteAttributeValue("", 10079, app.PlatformSettings.VersionNumber, 10079, 35, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral("></script>\r\n                <script");
            BeginWriteAttribute("src", " src=\"", 10150, "\"", 10221, 2);
            WriteAttributeValue("", 10156, "/content/js/filterdialog.js?v=", 10156, 30, true);
#nullable restore
#line 147 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
WriteAttributeValue("", 10186, app.PlatformSettings.VersionNumber, 10186, 35, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral("></script>\r\n                <script");
            BeginWriteAttribute("src", " src=\"", 10257, "\"", 10327, 2);
            WriteAttributeValue("", 10263, "/content/js/jquery.form.js?v=", 10263, 29, true);
#nullable restore
#line 148 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
WriteAttributeValue("", 10292, app.PlatformSettings.VersionNumber, 10292, 35, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral("></script>\r\n                <script");
            BeginWriteAttribute("src", " src=\"", 10363, "\"", 10457, 2);
            WriteAttributeValue("", 10369, "/content/js/jquery-validate/jquery.validate.min.js?v=", 10369, 53, true);
#nullable restore
#line 149 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
WriteAttributeValue("", 10422, app.PlatformSettings.VersionNumber, 10422, 35, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral("></script>\r\n                <script");
            BeginWriteAttribute("src", " src=\"", 10493, "\"", 10591, 2);
            WriteAttributeValue("", 10499, "/content/js/jquery-ui-1.10.3/ui/jquery.ui.droppable.js?v=", 10499, 57, true);
#nullable restore
#line 150 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
WriteAttributeValue("", 10556, app.PlatformSettings.VersionNumber, 10556, 35, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral("></script>\r\n                <script");
            BeginWriteAttribute("src", " src=\"", 10627, "\"", 10731, 2);
            WriteAttributeValue("", 10633, "/content/customize/js/flowdesign/jquery.jsPlumb-1.4.0-all.js?v=", 10633, 63, true);
#nullable restore
#line 151 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
WriteAttributeValue("", 10696, app.PlatformSettings.VersionNumber, 10696, 35, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral("></script>\r\n                <script");
            BeginWriteAttribute("src", " src=\"", 10767, "\"", 10868, 2);
            WriteAttributeValue("", 10773, "/content/customize/js/flowdesign/jquery.contextmenu.r2.js?v=", 10773, 60, true);
#nullable restore
#line 152 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
WriteAttributeValue("", 10833, app.PlatformSettings.VersionNumber, 10833, 35, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral("></script>\r\n\r\n                <script");
            BeginWriteAttribute("src", " src=\"", 10906, "\"", 10982, 2);
            WriteAttributeValue("", 10912, "/content/js/jquery.sumoselect.js?v=", 10912, 35, true);
#nullable restore
#line 154 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
WriteAttributeValue("", 10947, app.PlatformSettings.VersionNumber, 10947, 35, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral("></script>\r\n                <script");
            BeginWriteAttribute("src", " src=\"", 11018, "\"", 11089, 2);
            WriteAttributeValue("", 11024, "/content/js/xms.metadata.js?v=", 11024, 30, true);
#nullable restore
#line 155 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
WriteAttributeValue("", 11054, app.PlatformSettings.VersionNumber, 11054, 35, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral("></script>\r\n                ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("script", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "063c666ef77055074643c8fe7337cea85e6897b732121", async() => {
            }
            );
            __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
            BeginAddHtmlAttributeValues(__tagHelperExecutionContext, "src", 2, global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
            AddHtmlAttributeValue("", 11131, "~/content/js/pages/list.workflow.js?v=", 11131, 38, true);
#nullable restore
#line 156 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
AddHtmlAttributeValue("", 11169, app.PlatformSettings.VersionNumber, 11169, 35, false);

#line default
#line hidden
#nullable disable
            EndAddHtmlAttributeValues(__tagHelperExecutionContext);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral(@"
                <script>
                    var WFPModel = {
                        dialog: $('#wfpModal'),
                        dialogid: '#wfpModal',
                        gridview: $('#gridview'),
                        flowsData: [],
                        loadWorkFlowInfo: function () {
                            //审批次数分组
                            var flowGroups = [], _prefixed = 'flowgroup_', maxCount = 100;//最大50次
                            for (var i = 1; i < maxCount; i++) {
                                var $steps = $('tr[data-flowstep=""' + i + '""]', WFPModel.gridview);
                                if ($steps.length > 0) {
                                    var temp = $('<div></div>');
                                    temp.append($steps.clone(true));
                                    flowGroups.push(temp);
                                }
                            }
                            console.log(flowGroups);
                            var gro");
            WriteLiteral(@"updatas = []
                            $.each(flowGroups, function (key, item) {
                                if (item && item.length > 0) {
                                    var $timeline = item.find('.workflow-items-timeline'), $start = item.find('.workflow-items-start'), $items = item.find('.workflow-items'), $end = item.find('.workflow-items-end');
                                    var datas = [];
                                    var step = 0;
                                    console.log($timeline, $start, $items, $end);

                                    if ($start.length > 0) {
                                        if (!datas[step]) {
                                            datas[step] = [];
                                        }
                                        datas[step].push(getItemInfo($start, 'start'));
                                        step++;
                                    }
                                    if ($timeline.length > 0) {");
            WriteLiteral(@"
                                        datas.timeline = $timeline.children().html();
                                    }
                                    if ($items.length > 0) {
                                        $items.each(function () {
                                            var _info = getItemInfo(this, 'step');
                                            var order = _info.order - 1;
                                            if (!datas[order]) {
                                                datas[order] = [];
                                            }
                                            datas[order].push(_info);
                                        });
                                    }
                                    if ($end.length > 0) {
                                        var _len = datas.length - 1;
                                        if (!datas[_len]) {
                                            datas[_len] = [];
                   ");
            WriteLiteral(@"                     }
                                        datas[_len].push(getItemInfo($end, 'end'))
                                    }
                                    groupdatas.push(datas);
                                }
                            });
                            console.log(groupdatas);
                            WFPModel.createPointFlow(groupdatas);
                            WFPModel.flowsData = groupdatas
                        },
                        createPointFlow: function (datas) {
                            console.log($('.workflow-changer'))
                            $.each(datas, function (key, items) {
                                $('.workflow-changer').flowLine({
                                    datas: items,
                                    datamap: [{ key: 'label', value: 'label' },
                                    { key: 'order', value: 'order' },
                                    { key: 'handler', value: 'handler' },
");
            WriteLiteral(@"                                    { key: 'state', value: 'state' },
                                    { key: 'desc', value: 'desc' },
                                    { key: 'attach', value: 'attach' },
                                    { key: 'date', value: 'date' },
                                    { key: 'type', value: 'type' },
                                    ]
                                    , other: { otherHtml: '<h5>{timeline}</h5>', otherDatamap: [{ key: 'timeline', value: items.timeline }] }
                                });
                                $('.workflow-changer').flowLine('stepOther', 'prepend');
                                $('.workflow-changer').flowLine('createsteplist');
                            })

                        }
                        , loadWorkFlowLine: function () {
                            var datas = WFPModel.flowsData;
                            var htmls = [];
                            console.log(datas);
     ");
            WriteLiteral(@"                       if (datas && datas.length > 0) {
                                $.each(datas, function (i, n) {
                                    if (n && n.length > 0) {
                                        var time = n[0];
                                        if (time && time.length > 0) {
                                            htmls.push('<option value=""' + i + '"">' + time[0].date + '</option>');
                                        }
                                    }
                                });
                                $('#filterByDateTime').empty().html(htmls.join(''));
                            }
                        }
                    };
                    function getItemInfo(item, type, order) {
                        var $item = $(item), res = {};
                        res.order = $item.attr('data-step');
                        res.label = $item.find('.workflow-item-label').text();
                        res.handler = $item.fi");
            WriteLiteral(@"nd('.workflow-item-handler').text();
                        res.state = $item.find('.workflow-item-state').text().replace(/^\s+/g, '').replace(/\s$/g, '');
                        res.desc = $item.find('.workflow-item-desc').text();
                        res.attach = $item.find('.workflow-item-attach').text();
                        res.date = $item.find('.workflow-item-date').text();
                        res.type = type || 'step';
                        return res;
                    }
                    $(function () {
                        WFPModel.dialog.modal({
                            backdrop: 'static'
                        })
                        WFPModel.dialog.on('hidden.bs.modal', function () {
                            Xms.Web.CloseDialog(WFPModel.dialogid);
                        });
                        WFPModel.loadWorkFlowInfo();

                        function loadWorkFlowPic() {
                            var $infoTooltip = $('#infoTooltip');
 ");
            WriteLiteral(@"                            var $flowinfos = $('#flowinfos');
                            loadEntities(function () {
                                setTimeout(function () {
                                    //加载流程设计相关信息
                                    jsPlumb.ready(function () {

                                        loadInitFlow();
                                        $('#workflowWrap').removeClass('active').css({ 'visibility': 'visible' });
                                        WFPModel.loadWorkFlowLine();
                                        $('[data-toggle=""tooltip""]').toggleTooltip({
                                            target: $infoTooltip,
                                            context: $('#workflowWrap'),
                                            showHandler: function (target, tooltip) {
                                                var val = $('#filterByDateTime').val();
                                                var datas = WFPModel.flowsData;
   ");
            WriteLiteral(@"                                             var _label = target.find('.xmsPointer-title').text();
                                                if (_label == '开始') {
                                                    _label = '发起申请';
                                                }
                                                if (datas && datas.length > 0) {
                                                    console.log('datas', datas);
                                                    var htmls = [];
                                                    var currentdatas = datas[val];
                                                    if (currentdatas && currentdatas.length > 0) {
                                                        $.each(currentdatas, function (i, n) {
                                                            console.log('n', n);
                                                            var time = n;
                                                            co");
            WriteLiteral(@"nsole.log('time', time);
                                                            $.each(time, function (iii, nnn) {
                                                                if (nnn.label != '') {
                                                                    var labelArr = nnn.label.split('.');
                                                                    var labelname = labelArr[1];
                                                                    if (labelname == _label) {
                                                                        htmls.push('<div class=""flowinfo-item""><span>' + nnn.handler + '</span>' + nnn.state + '</div>');
                                                                    }
                                                                }
                                                            });
                                                        });
                                                    }
                        ");
            WriteLiteral(@"                            if (htmls.length > 0) {
                                                        $flowinfos.html(htmls.join(''))
                                                    } else {
                                                        $flowinfos.html('没有数据')
                                                    }
                                                }
                                            }
                                        });

                                        loadFlowInfos();
                                    });
                                }, 300);
                            });
                        }

                        function loadFlowInfos() {
                            var val = $('#filterByDateTime').val();
                            var datas = WFPModel.flowsData;
                            var $workflowWrapBox = $('#workflowWrapBox');
                            $workflowWrapBox.find('.xmsPointer-box').each(funct");
            WriteLiteral(@"ion (i, n) {
                                var target = $(this);
                                target.removeClass('xms-flowstate-active');
                                var _label = target.find('.xmsPointer-title').text();
                                if (_label == '开始') {
                                    _label = '发起申请';
                                }
                                if (datas && datas.length > 0) {
                                    var htmls = [];
                                    var currentdatas = datas[val];
                                    if (currentdatas && currentdatas.length > 0) {
                                        $.each(currentdatas, function (i, n) {
                                            var time = n;
                                            $.each(time, function (iii, nnn) {
                                                if (nnn.label != '') {
                                                    var labelArr = nnn.label.split('.");
            WriteLiteral(@"');
                                                    var labelname = labelArr[1];
                                                    console.log('labelname',labelname)
                                                    if (labelname == _label && nnn.state.indexOf('处理中')!=-1) {
                                                        target.addClass('xms-flowstate-active');
                                                    }
                                                }
                                            });
                                        });
                                    }

                                }
                            });
                        }
                        var isLoadWorkFlow = false;
                        $('#showhideFlow').on('click', function () {
                            if ($('#workflowWrapBox').is(':hidden')) {
                                $('#workflowWrapBox').show();
                            } else {
       ");
            WriteLiteral(@"                         $('#workflowWrapBox').hide();
                            }
                            if (!isLoadWorkFlow) {
                                setTimeout(function () {
                                    loadWorkFlowPic();
                                    isLoadWorkFlow = true;
                                })
                            }
                        });
                        $('#filterByDateTime').on('change', function () {
                            loadFlowInfos()
                        })
                        // loadWorkFlowInstances(function (res) {
                        //      WFPModel.loadWorkFlowLine();
                        //  });
                    });
                </script>
            </div>
            <div class=""modal-footer"">
                <button type=""button"" class=""btn btn-default""
                        data-dismiss=""modal"">
                    <span class=""glyphicon glyphicon-remove""></span>
             ");
            WriteLiteral("       ");
#nullable restore
#line 392 "G:\projects\xms_v2\Presentation\Xms.Web\Views\Flow\WorkFlowInstanceDetail.cshtml"
               Write(app.T["dialog_close"]);

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n                </button>\r\n            </div>\r\n        </div><!-- /.modal-content -->\r\n    </div><!-- /.modal-dialog -->\r\n</div><!-- /.modal -->");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public Xms.Web.Framework.Context.IWebAppContext app { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<Xms.Web.Models.WorkFlowInstanceDetailModel> Html { get; private set; }
    }
}
#pragma warning restore 1591
